{"version":3,"file":"fullscreen.polyfill.js","sources":["../src/index.js"],"sourcesContent":["const spec = [\n\t'fullscreen',\n\t'fullscreenEnabled',\n\t'fullscreenElement',\n\t'fullscreenchange',\n\t'fullscreenerror',\n\t'exitFullscreen',\n\t'requestFullscreen'\n]\n\nconst webkit = [\n\t'webkitIsFullScreen',\n\t'webkitFullscreenEnabled',\n\t'webkitFullscreenElement',\n\t'webkitfullscreenchange',\n\t'webkitfullscreenerror',\n\t'webkitExitFullscreen',\n\t'webkitRequestFullscreen'\n]\n\nconst moz = [\n\t'mozFullScreen',\n\t'mozFullScreenEnabled',\n\t'mozFullScreenElement',\n\t'mozfullscreenchange',\n\t'mozfullscreenerror',\n\t'mozCancelFullScreen',\n\t'mozRequestFullScreen'\n]\n\nconst ms = [\n\t'',\n\t'msFullscreenEnabled',\n\t'msFullscreenElement',\n\t'MSFullscreenChange',\n\t'MSFullscreenError',\n\t'msExitFullscreen',\n\t'msRequestFullscreen'\n]\n\n// Make sure document exist, if it doesn't make it a dumb object\ndocument ? document : (document = {})\n\n// Get the vendor fullscreen prefixed api\nconst fsVendorKeywords = (function getFullscreenApi () {\n\tconst fullscreenEnabled = [spec[1], webkit[1], moz[1], ms[1]].find((prefix) => document[prefix])\n\treturn [spec, webkit, moz, ms].find((vendor) => {\n\t\treturn vendor.find((prefix) => prefix === fullscreenEnabled)\n\t}) || []\n})()\n\nfunction handleEvent (eventType, event) {\n\tdocument[spec[0]] = document[fsVendorKeywords[0]] ||\n\t\t!!document[fsVendorKeywords[2]] || false\n\tdocument[spec[1]] = document[fsVendorKeywords[1]] || false\n\tdocument[spec[2]] = document[fsVendorKeywords[2]] || null\n\tdocument.dispatchEvent(new Event(eventType), event.target)\n}\n\nfunction setupShim () {\n\t// fullscreen\n\t// Defaults to false for cases like MS where they do not have this\n\t// attribute. Another way to check whether fullscreen is active is to look\n\t// at the fullscreenElement attribute.\n\tdocument[spec[0]] = document[fsVendorKeywords[0]] || \n\t\t!!document[fsVendorKeywords[2]] || false\n\n\t// fullscreenEnabled\n\tdocument[spec[1]] = document[fsVendorKeywords[1]] || false\n\n\t// fullscreenElement\n\tdocument[spec[2]] = document[fsVendorKeywords[2]] || null\n\n\t// onfullscreenchange\n\tdocument.addEventListener(fsVendorKeywords[3], handleEvent.bind(document, spec[3]), false)\n\n\t// onfullscreenerror\n\tdocument.addEventListener(fsVendorKeywords[4], handleEvent.bind(document, spec[4]), false)\n\n\t// exitFullscreen\n\tdocument[spec[5]] = function () { return document[fsVendorKeywords[5]]() }\n\n\t// requestFullscreen\n\tElement.prototype[spec[6]] = function () {\n\t\treturn this[fsVendorKeywords[6]].apply(this, arguments)\n\t}\n}\n\n// Don't polyfill if it already exist\nexport default (typeof document[spec[1]] !== 'undefined' || !fsVendorKeywords.length) ? {} : setupShim()\n"],"names":["spec","webkit","moz","ms","document","fullscreenEnabled","fsVendorKeywords","find","prefix","vendor","handleEvent","eventType","event","dispatchEvent","Event","target","length","addEventListener","bind","Element","prototype","this","apply","arguments"],"mappings":";;;;;;+CAAA,IAAMA,EAAO,CACZ,aACA,oBACA,oBACA,mBACA,kBACA,iBACA,qBAGKC,EAAS,CACd,qBACA,0BACA,0BACA,yBACA,wBACA,uBACA,2BAGKC,EAAM,CACX,gBACA,uBACA,uBACA,sBACA,qBACA,sBACA,wBAGKC,EAAK,CACV,GACA,sBACA,sBACA,qBACA,oBACA,mBACA,uBAIDC,WAAuBA,SAAW,IAGlC,IACOC,EADDC,GACCD,EAAoB,CAACL,EAAK,GAAIC,EAAO,GAAIC,EAAI,GAAIC,EAAG,IAAII,MAAK,SAACC,UAAWJ,SAASI,MACjF,CAACR,EAAMC,EAAQC,EAAKC,GAAII,MAAK,SAACE,UAC7BA,EAAOF,MAAK,SAACC,UAAWA,IAAWH,SACrC,IAGP,SAASK,EAAaC,EAAWC,GAChCR,SAASJ,EAAK,IAAMI,SAASE,EAAiB,OAC3CF,SAASE,EAAiB,MAAO,EACpCF,SAASJ,EAAK,IAAMI,SAASE,EAAiB,MAAO,EACrDF,SAASJ,EAAK,IAAMI,SAASE,EAAiB,KAAO,KACrDF,SAASS,cAAc,IAAIC,MAAMH,GAAYC,EAAMG,oBAiCP,IAAtBX,SAASJ,EAAK,KAAwBM,EAAiBU,QAzB7EZ,SAASJ,EAAK,IAAMI,SAASE,EAAiB,OAC3CF,SAASE,EAAiB,MAAO,EAGpCF,SAASJ,EAAK,IAAMI,SAASE,EAAiB,MAAO,EAGrDF,SAASJ,EAAK,IAAMI,SAASE,EAAiB,KAAO,KAGrDF,SAASa,iBAAiBX,EAAiB,GAAII,EAAYQ,KAAKd,SAAUJ,EAAK,KAAK,GAGpFI,SAASa,iBAAiBX,EAAiB,GAAII,EAAYQ,KAAKd,SAAUJ,EAAK,KAAK,GAGpFI,SAASJ,EAAK,IAAM,kBAAqBI,SAASE,EAAiB,YAGnEa,QAAQC,UAAUpB,EAAK,IAAM,kBACrBqB,KAAKf,EAAiB,IAAIgB,MAAMD,KAAME,cAKyC"}